name: Pad_2_Pro_Kernel
on:
  workflow_dispatch:
    inputs:
      enable_feature_kpm:
        description: 'KPM'
        required: false
        default: true
        type: boolean
      enable_feature_bbr:
        description: 'BBR'
        required: false
        default: true
        type: boolean
        

jobs:
  build:
    name: Build_Pad_2_Pro_Kernel
    runs-on: ubuntu-latest
    steps:
      # Get the full Git history
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: 设置全局环境变量 (Set Global Environment Variables)
        run: |
          echo "ENABLE_KPM=${{ github.event.inputs.enable_feature_kpm }}" >> $GITHUB_ENV
          echo "ENABLE_BBR=${{ github.event.inputs.enable_feature_bbr }}" >> $GITHUB_ENV
          echo "DEVICE_NAME=oneplus_pad_2_pro" >> $GITHUB_ENV
          echo "KERNEL_TIME=Tue Mar 4 09:04:13 UTC 2025" >> $GITHUB_ENV
          echo "DEFAULT_SUFFIX=-android15-8-g302cb15749a8-ab13157299-4k" >> $GITHUB_ENV
      - name: 设置缓存路径 (Set Cache Path)
        run: |
          echo "CCACHE_DIR=$HOME/.ccache_$DEVICE_NAME" >> $GITHUB_ENV
      - name: 验证环境变量 (Verify Environment Variables)
        run: |
          echo "验证："
          echo "DEVICE_NAME: $DEVICE_NAME"
          echo "KERNEL_TIME: $KERNEL_TIME"
          echo "DEFAULT_SUFFIX: $DEFAULT_SUFFIX"
          echo "CCACHE_DIR: $CCACHE_DIR"